<div class="pbm-container">

  <!-- Logout Button -->
  <app-logout-button class="logout-btn"></app-logout-button>

  <!-- Back Button -->
  <button class="back-btn" (click)="goBack()">â¬… Back</button>

  <!-- Selected Cards & Features Section -->
  <div class="info-box" *ngIf="selectedCards().length > 0 || selectedCheckboxes().length > 0">
      <div class="selected-info">
          <h3>Selected Cards:</h3>
          <div *ngFor="let card of selectedCards()">
              <img [src]="getCardImageFn(card)" [alt]="card">
              <span>{{ card }}</span>
          </div>
      </div>

      <div class="selected-checkboxes">
          <h3>Selected Features:</h3>
          <span *ngFor="let feature of selectedCheckboxes()">{{ feature }}</span>
      </div>
  </div>

  <!-- Loader -->
  <div *ngIf="loading()" class="loader-container">
      <div class="loader"></div>
      <p>Loading data, please wait...</p>
  </div>

  <!-- Tables Section -->
  <div *ngIf="!loading()">
      <div class="table-container" *ngFor="let tableData of tableList">
          <div class="table-box">
              <h3>{{ tableData.title }}</h3>
              <table mat-table [dataSource]="tableData.dataSource" matSort>

                  <ng-container *ngFor="let column of tableData.columns" [matColumnDef]="column">
                      <th mat-header-cell *matHeaderCellDef mat-sort-header> {{ column }} </th>
                      <td mat-cell *matCellDef="let row" [ngStyle]="{'text-align': column === 'COUNT' ? 'right' : 'left'}">
                          {{ row[column] || 'N/A' }}
                      </td>
                  </ng-container>

                  <tr mat-header-row *matHeaderRowDef="tableData.columns"></tr>
                  <tr mat-row *matRowDef="let row; columns: tableData.columns;"></tr>
              </table>

              <mat-paginator #paginators [pageSize]="10" [pageSizeOptions]="[5, 10, 25]" showFirstLastButtons>
              </mat-paginator>
          </div>
      </div>
  </div>
</div>
